<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>CSS3动画详解 | Moretwo</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="Moretwo">

  
  
  

  
</head>


<body class="post-template">

<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">
      <header class="site-head"  style="background: #24282b url(//www.csshero.org/wp-content/themes/heroin/images/pat07.jpg) 0 -20%" >
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="//mir-cdn.behance.net/v1/rendition/user/138/1235957.53b3b7718e5f5.png" alt="Blog Logo"/></a> 
            <h1 class="blog-title">Moretwo</h1>
            <h2 class="blog-description"><button id="showMenu">Show Menu</button></h2>
        </div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2014-10-27T09:49:08.000Z" itemprop="datePublished">
          Oct 27 2014
      </time>
    
    
    | 
    <a href='/tags/PS3/'>PS3</a>,
    
    <a href='/tags/Games/'>Games</a>
    
    
</span>
    <h1 class="post-title">CSS3动画详解</h1>
    <section class="post-content">
      <h2 id="CSS3动画">CSS3动画</h2>
<p>有人认为CSS动画是做了js的事情，较真起来也算，只是已经抢占许多年了，早些年要实现鼠标滑过链接变色的基本效果，需要动用Java Applet，后来只需给HTML元素加事件<code>onclick=changecolor()</code>，再之后正如你所知，只要写<code>:hover</code>、<code>:focus</code>这样的伪类即可，同样的，现在有了CSS3动画。</p>
<p>Read More</p>
<h4 id="CSS3动画的优势：">CSS3动画的优势：</h4>
<ul><br>    <li>写起来非常方便，不会js也没问题</li><br>    <li>有些动画js也不能很好的胜任，比如让一个元素在二维、三维空间旋转</li><br>    <li>运行效果流畅，让浏览器去优化性能</li><br>    <li>浏览器从底层优化动画序列，例如当tab不可见的时候，降低更新的频率提高整体性能</li><br></ul>

<h4 id="劣势：">劣势：</h4>
<ul><br>    <li>CSS3动画应用的范围还是有限</li><br>    <li>兼容性：对于增强体验的Feature来说，可以无视</li><br></ul>

<h3 id="可以做动画效果的属性">可以做动画效果的属性</h3>
<p>理论上来说，任何单独的CSS属性都可以做动画的效果，比如：</p>
<ul><br>    <li><code>width</code>：10px 到 100px</li><br>    <li><code>padding</code>：0px 到 20px</li><br>    <li><code>color</code>：#F00 到 #00F</li><br>    <li><code>top</code>：0px 到 10px</li><br>    <li><code>border-radius</code>：3px 到 8px</li><br>    <li><code>transform</code>：rotate(0deg) 到 ratate(45deg)</li><br></ul>

<p>你也可以给<code>red</code>、<code>blue</code>这样的赋值的颜色属性加transition或animation，它会被自动转化为对应的RGB值。</p>
<h3 id="不可以做动画效果的属性">不可以做动画效果的属性</h3>
<p>看下面这些例子：</p>
<pre><code><span class="id">#container</span> <span class="tag">p</span> <span class="rules">{
    <span class="rule"><span class="attribute">display</span>:<span class="value"> none</span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> all <span class="number">3s</span> ease</span></span>;
<span class="rule">}</span></span>

<span class="id">#container</span><span class="pseudo">:hover</span> <span class="tag">p</span> <span class="rules">{
    <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;
<span class="rule">}</span></span>

<span class="comment">/**********************/</span>

<span class="id">#container</span> <span class="tag">p</span> <span class="rules">{
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">0px</span></span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> all <span class="number">3s</span> ease</span></span>;
<span class="rule">}</span></span>

<span class="id">#container</span><span class="pseudo">:hover</span> <span class="tag">p</span> <span class="rules">{
    <span class="rule"><span class="attribute">height</span>:<span class="value"> auto</span></span>;
<span class="rule">}</span></span>
</code></pre><p>属性从无到有或到不确定值，动画效果不会生效，因为浏览器不知道如何去做，对于元素从无到有，你可以选择<code>opacity</code>属性来处理。</p>
<h2 id="CSS3_Transition">CSS3 Transition</h2>
<p>Transition是被用到最多的也是最简单的CSS3动画类型。如果要做一个10px宽的蓝色元素在3s后变成一个100px宽的红色元素的效果，Transition可以平滑实现，你只需要声明起始和终止这两个状态。</p>
<p>Transition的触发也很简单，可以用<code>:hover</code>、<code>:focus</code>这样的伪类来触发，也可以通过改变元素的样式来触发。</p>
<h3 id="transition的属性">transition的属性</h3>
<h4 id="transition-property">transition-property</h4>
<p>transition-property用来声明transition会被应用到的属性。</p>
<pre><code><span class="id">#container</span> <span class="tag">p</span><span class="class">.one</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-property</span>:<span class="value"> color</span></span>;
<span class="rule">}</span></span>

<span class="id">#container</span> <span class="tag">p</span><span class="class">.two</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-property</span>:<span class="value"> width</span></span>;
<span class="rule">}</span></span>

<span class="id">#container</span> <span class="tag">p</span><span class="class">.three</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-property</span>:<span class="value"> color, width</span></span>;
<span class="rule">}</span></span>
</code></pre><p>如果你想应用到所有属性，那可以简单写作<code>all</code>，也可以通过<code>none</code>来关闭transition。</p>
<h4 id="transition-duration">transition-duration</h4>
<p>transition-duration用来声明动画持续的时长，可以是s也可以是ms</p>
<pre><code><span class="id">#container</span> <span class="tag">p</span><span class="class">.one</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-duration</span>:<span class="value"> <span class="number">3s</span></span></span>;
<span class="rule">}</span></span>

<span class="id">#container</span> <span class="tag">p</span><span class="class">.two</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-duration</span>:<span class="value"> <span class="number">3000ms</span></span></span>;
<span class="rule">}</span></span>
</code></pre><h4 id="transition-timing-function">transition-timing-function</h4>
<p>transition-timing-function声明了动画的缓动类型，有下面几个选项：</p>
<ul><br>    <li><code>ease</code>：默认项，动画效果慢慢开始然后加速，到中点后再减速最后缓慢到达终点</li><br>    <li><code>ease-in-out</code>：与ease类似，加减速更柔和一些</li><br>    <li><code>ease-in</code>：开始比较慢，但是加速和停止曲线比较陡峭</li><br>    <li><code>ease-out</code>：开始较快，然后缓慢停止</li><br>    <li><code>linear</code>：线性平均速率，通常在color和opacity属性的变化上</li><br></ul>

<p>最后，还有<code>cubic-bezier</code>函数，可以自己创造更多更优美的缓动类型。</p>
<h4 id="transition-delay">transition-delay</h4>
<p>transition-delay声明了动画延迟开始的时间，很容易理解</p>
<pre><code><span class="id">#container</span> <span class="tag">p</span><span class="class">.one</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-delay</span>:<span class="value"> <span class="number">0.5s</span></span></span>;
<span class="rule">}</span></span>

<span class="id">#container</span> <span class="tag">p</span><span class="class">.two</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-delay</span>:<span class="value"> <span class="number">500ms</span></span></span>;
<span class="rule">}</span></span>
</code></pre><h3 id="transition简写">transition简写</h3>
<p>上面介绍了transition的属性，他们也可以合并成一项，省去了许多拼写，当然也别忘记浏览器前缀：</p>
<pre><code><span class="id">#container</span> <span class="tag">p</span> <span class="rules">{
    <span class="rule"><span class="attribute">transition-property</span>:<span class="value"> all</span></span>;
    <span class="rule"><span class="attribute">transition-duration</span>:<span class="value"> <span class="number">3s</span></span></span>;
    <span class="rule"><span class="attribute">transition-timing-function</span>:<span class="value"> ease-in-out</span></span>;
    <span class="rule"><span class="attribute">transition-delay</span>:<span class="value"> <span class="number">0.5s</span></span></span>;
<span class="rule">}</span></span>


<span class="id">#element</span> <span class="rules">{
    <span class="comment">/* starting state styles */</span>
    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#F00</span></span></span>;
    <span class="rule"><span class="attribute">-webkit-transition</span>:<span class="value"> all <span class="number">3s</span> ease-in-out <span class="number">0.5s</span></span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> all <span class="number">3s</span> ease-in-out <span class="number">0.5s</span></span></span>;
<span class="rule">}</span></span>

<span class="id">#element</span><span class="pseudo">:hover</span> <span class="rules">{
    <span class="comment">/* ending state styles */</span>
    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#00F</span></span></span>;
<span class="rule">}</span></span>
</code></pre><h3 id="transition的高级用法">transition的高级用法</h3>
<h4 id="不同的transition效果">不同的transition效果</h4>
<p>看这样的例子：</p>
<pre><code><span class="tag">p</span><span class="id">#animate</span> <span class="rules">{
    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#ff6</span></span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> all <span class="number">3s</span> ease-in-out <span class="number">0.5s</span></span></span>;
<span class="rule">}</span></span>

<span class="tag">p</span><span class="id">#animate</span><span class="pseudo">:hover</span> <span class="rules">{
    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#0f0</span></span></span>;
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">scale</span>(<span class="number">4</span>)</span></span>;
<span class="rule">}</span></span>
</code></pre><p>在这个例子中，当鼠标hover，元素在0.5s之后在3s内放大四倍，鼠标移开，需要同样的时间回到原来的状态。如果想要不同的效果，可以这样写：</p>
<pre><code><span class="tag">p</span><span class="id">#animate</span> <span class="rules">{
    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#ff6</span></span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> all <span class="number">0.5s</span> ease-in-out</span></span>;
<span class="rule">}</span></span>

<span class="tag">p</span><span class="id">#animate</span><span class="pseudo">:hover</span> <span class="rules">{
    <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#0f0</span></span></span>;
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">scale</span>(<span class="number">4</span>)</span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> all <span class="number">3s</span> ease-in-out <span class="number">0.5s</span></span></span>;
<span class="rule">}</span></span>
</code></pre><h4 id="多个transition">多个transition</h4>
<p>需要给多个transition指定不同的效果时，<code>all</code>属性解决不了，可以这样写：</p>
<pre><code><span class="tag">p</span><span class="id">#animate</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">10em</span></span></span>;
    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#F00</span></span></span>;
    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">5px</span></span></span>;
    <span class="rule"><span class="attribute">transition-property</span>:<span class="value"> width, border-radius, background-color</span></span>;
    <span class="rule"><span class="attribute">transition-duration</span>:<span class="value"> <span class="number">1s</span>, <span class="number">2s</span></span></span>;
    <span class="rule"><span class="attribute">transition-timing-function</span>:<span class="value">  ease, ease-out, linear</span></span>;
<span class="rule">}</span></span>

<span class="tag">p</span><span class="id">#animate</span><span class="pseudo">:hover</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">20em</span></span></span>;
    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#00F</span></span></span>;
    <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">50%</span></span></span>;
<span class="rule">}</span></span>
</code></pre><p>注意其中的<code>transition-duration</code>只写了两个，那么第三个<code>transition-property</code>属性<code>background-color</code>就用循环到第一个，也就是说他的<code>transition-duration</code>值是<code>1s</code>。</p>
<h3 id="transition示例">transition示例</h3>
<div id="transition1"><br>#transition1 {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;width:350px;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;background-color:#1abc9c;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;transition-propety:width,background-color;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;transition-duration:.5s, 1s;<br><br>}<br><br>#transition1:hover {<br><br>&nbsp;&nbsp;&nbsp;&nbsp;width:450px;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;background-color:#8e44ad;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;transition-duration:.5s, 3s;<br><br>}<br><br></div>




<h2 id="CSS3_Animation">CSS3 Animation</h2>
<h3 id="Animation和Transition的不同">Animation和Transition的不同</h3>
<ul><br>    <li>和transition一样都可以定义开始和结束状态，但是animation还可以指定更确定的中间状态</li><br>    <li>animation可以像transition一样被触发，也可以自动运行</li><br>    <li>animation可以无限循环的运行下去，也可以指定运行的次数</li><br>    <li>animation可以在顺序运行也可以反向运行</li><br>    <li>animatino写起来稍麻烦些，但是依然比js简单许多</li><br></ul>

<h3 id="定义keyframes">定义keyframes</h3>
<pre><code><span class="at_rule">@<span class="keyword">keyframes</span> colorchange </span>{
    0%   <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#00F</span></span></span>; <span class="comment">/* from: blue */</span> <span class="rule">}</span></span>
    25%  <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#F00</span></span></span>; <span class="comment">/* red        */</span> <span class="rule">}</span></span>
    50%  <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#0F0</span></span></span>; <span class="comment">/* green      */</span> <span class="rule">}</span></span>
    75%  <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#F0F</span></span></span>; <span class="comment">/* purple     */</span> <span class="rule">}</span></span>
    100% <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#00F</span></span></span>; <span class="comment">/* to: blue   */</span> <span class="rule">}</span></span>
}

<span class="at_rule">@<span class="keyword">-webkit-keyframes</span> colorchange </span>{
    0%   <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#00F</span></span></span>; <span class="comment">/* from: blue */</span> <span class="rule">}</span></span>
    25%  <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#F00</span></span></span>; <span class="comment">/* red        */</span> <span class="rule">}</span></span>
    50%  <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#0F0</span></span></span>; <span class="comment">/* green      */</span> <span class="rule">}</span></span>
    75%  <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#F0F</span></span></span>; <span class="comment">/* purple     */</span> <span class="rule">}</span></span>
    100% <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#00F</span></span></span>; <span class="comment">/* to: blue   */</span> <span class="rule">}</span></span>
}
</code></pre><p>在这个例子中，只是定义了<code>background-color</code>这一个属性，如有需要，可以换做其他。对于<code>0%</code>这个也可以用<code>from</code>关键字来替代，同样的可以用<code>to</code>来代替<code>100%</code>，过渡状态，你可以定义任何百分比，类似<code>12.5%</code>这样的也可以，不过就不用给自己找麻烦了吧。浏览器的<code>prefix</code>也不能少。</p>
<h3 id="应用到元素">应用到元素</h3>
<p>将<code>animation</code>应用到元素的属性写法，和<code>transition</code>差不太多，顺序都一致，就不在一个个参数重复说明，直接看代码吧：</p>
<pre><code><span class="id">#myelement</span> <span class="rules">{
    <span class="rule"><span class="attribute">animation-name</span>:<span class="value"> colorchange</span></span>; <span class="comment">/**这里引用了前面定义的动画**/</span>
    <span class="rule"><span class="attribute">animation-duration</span>:<span class="value"> <span class="number">5s</span></span></span>;
    <span class="rule"><span class="attribute">animation-timing-function</span>:<span class="value"> linear</span></span>;
    <span class="rule"><span class="attribute">animation-delay</span>:<span class="value"> <span class="number">1s</span></span></span>;
    <span class="rule"><span class="attribute">animation-iteration-count</span>:<span class="value"> infinite</span></span>;
    <span class="rule"><span class="attribute">animation-direction</span>:<span class="value"> alternate</span></span>;
<span class="rule">}</span></span>

<span class="comment">/****简写****/</span>
<span class="id">#myelement</span> <span class="rules">{
    <span class="rule"><span class="attribute">-webkit-animation</span>:<span class="value"> colorchange <span class="number">5s</span> linear <span class="number">1s</span> infinite alternate</span></span>;
    <span class="rule"><span class="attribute">animation</span>:<span class="value"> colorchange <span class="number">5s</span> linear <span class="number">1s</span> infinite alternate</span></span>;
<span class="rule">}</span></span>
</code></pre><p><code>animation-iteration-count</code>用来指定动画循环的次数，无限循环用<code>infinite</code>。</p>
<p>animation-direction有四个值：</p>
<ul><br>    <li><code>normal</code>：默认，从0%执行到100%</li><br>    <li><code>reverse</code>：动画从100%执行到0%</li><br>    <li><code>alternate</code>：动画在0%到100%之间往复执行</li><br>    <li><code>alternate-reverse</code>与<code>alternate</code>一致，不过是从100%开始</li><br></ul>

<h3 id="Animation示例">Animation示例</h3>
<div id="ani1">Animate color</div>


<h2 id="CSS3_Transform">CSS3 Transform</h2>
<p>有了<code>transition</code>和<code>animation</code>之后，就可以做出些漂亮的动画效果，如果再搭配<code>transform</code>这一CSS3动画利器，就更出彩了。</p>
<h3 id="CSS3_2D_Transform">CSS3 2D Transform</h3>
<p>运用CSS3 2D Transform的技术，可以更自由轻松的来修饰HTML元素。CSS3 2D Transform的基本方法有下面这些：</p>
<ul><br>    <li><code>translate()</code></li><br>    <li><code>rotate()</code></li><br>    <li><code>scale()</code></li><br>    <li><code>skew()</code></li><br>    <li><code>matrix()</code></li><br></ul>

<h4 id="Translate">Translate</h4>
<p>使用<code>translate()</code>方法，可以将HTML元素在x-y轴平面上做位移，且不会影响到其他元素。</p>
<pre><code><span class="tag">div</span><span class="rules">{
    <span class="rule"><span class="attribute">-webkit-transform</span>:<span class="value"> <span class="function">translate</span>(<span class="number">20px</span>,<span class="number">20px</span>)</span></span>;
    <span class="rule"><span class="attribute">-moz-transform</span>:<span class="value"> <span class="function">translate</span>(<span class="number">20px</span>,<span class="number">20px</span>)</span></span>;
    <span class="rule"><span class="attribute">-o-transform</span>:<span class="value"> <span class="function">translate</span>(<span class="number">20px</span>,<span class="number">20px</span>)</span></span>;
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translate</span>(<span class="number">20px</span>,<span class="number">20px</span>)</span></span>;
<span class="rule">}</span></span>
</code></pre><p>效果如下：</p>
<div id="translate1"><br><div id="trans-inner1">Normal Div</div><br><div id="trans-inner2">transform:tranlated(40px, 40px)</div><br></div>

<h4 id="Rotate">Rotate</h4>
<p><code>rotate()</code>方法可以将元素按照时钟方向旋转，参数可以是<code>0deg</code>到<code>360deg</code>，也是在x-y轴平面，示例如下：</p>
<div id="rotate1"><br><div id="rota-inner1">Normal Div</div><br><div id="rota-inner2">transform:rotate(-30deg)</div><br></div>

<h4 id="Scale">Scale</h4>
<p>和名字的一样，<code>scale()</code>方法用来放大一个元素，依然是在x-y轴平面，看示例：</p>
<div id="scale1"><br>    <div id="sca-inner1">Normal Div</div><br>    <div id="sca-inner2">transform:scale(1.5,1.3)</div><br></div>

<h4 id="Skew">Skew</h4>
<p><code>skew()</code>方法可以将元素按照指定参数进行扭曲，你需要指定x、y轴的扭曲角度，看示例：</p>
<div id="skew1"><br><div id="sk-inner1">Normal Div</div><br><div id="sk-inner2">transform:skew(30deg,0)</div><br></div>

<h4 id="Matrix">Matrix</h4>
<p><code>matrix()</code>方法是以上所有2D效果的方法的总和，写法如下：</p>
<pre><code><span class="tag">div</span><span class="rules">{
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">matrix</span>(a,b,c,d,tx,ty)</span></span>;
<span class="rule">}</span></span>
</code></pre><p>本质上<code>scale</code>、<code>skew</code>、<code>rotate</code>、<code>translate</code>的效果都是通过<code>matrix</code>实现的，<code>tx</code>、<code>ty</code>表示位移量，关于<code>matrix</code>方法更详细的介绍可以参考这里：<a href="http://www.zhangxinxu.com/wordpress/2012/06/css3-transform-matrix-%E7%9F%A9%E9%98%B5/" target="_blank" rel="external">理解CSS3 transform中的Matrix(矩阵)</a></p>
<h3 id="CSS3_3D_Transform">CSS3 3D Transform</h3>
<p>了解了2D Transform之后，3D Transform的概念也不会太难，他给HTML元素在x-y平面加上了z轴，我们一个个来看看：</p>
<ul><br>    <li><code>translate3d(tx,ty,tz)</code>：他定义了一个3D的位移方法，增加了z轴的偏移量</li><br>    <li><code>translateZ(tz)</code>：这个方法只在Z轴偏移，与<code>translateX()</code>和<code>translateY()</code>相似</li><br>    <li><code>scale3d(sx,sy,sz)</code>：在原有的<code>scale</code>方法上增加了z轴的参数</li><br>    <li><code>scaleZ(sz)</code>：同理，只放大z轴，与<code>scaleX()</code>和<code>scaleY()</code>类似</li><br>    <li><code>rotate3d(rx,ry,rz)</code>：将元素以给定参数的某一个轴方向旋转</li><br>    <li><code>rotateX(angle)，rotateY(angle)</code>和<code>rotateZ(angle)</code>：只按照某一个轴旋转，<code>rotate3d(1,0,0,30deg)</code>相当于<code>rotateX(30deg)</code>，其他类推。</li><br></ul>

<p>来看看例子：</p>
<div class="transform-con"><br><div id="trans-3" class="inner"><br>width:100%;<br><br>height:100%;<br><br>transform: translateZ(-200px);<br></div><br></div>

<div class="transform-con"><br><div id="trans-31" class="inner"><br>width:100%;<br><br>height:100%;<br><br>transform: translateZ(100px);<br></div><br></div>

<div class="transform-con"><br><div id="rotate-31" class="inner"><br>width:100%;<br><br>height:100%;<br><br>transform: rotateX(45deg);<br></div><br></div><br><div class="transform-con"><br><div id="rotate-32" class="inner"><br>width:100%;<br><br>height:100%;<br><br>transform: rotateY(45deg);<br></div><br></div><br><div class="transform-con"><br><div id="rotate-33" class="inner"><br>width:100%;<br><br>height:100%;<br><br>transform: rotateZ(45deg);<br></div><br></div>

<p>任何有3D变换的元素，不论最后只是做了2D的变换，或者什么都没做<code>translate3d(0,0,0)</code>，都会触发浏览器去计算。不过，以后会更新优化也不一定。</p>
<h3 id="Perspective">Perspective</h3>
<p>激活元素的3D空间，需要<code>perspective</code>属性，写法有两种：</p>
<pre><code>transform: perspective( <span class="number">600</span>px );
<span class="javadoc">/**或者**/</span>
perspective: <span class="number">600</span>px;
</code></pre><p>这两种不同写法，当应用元素只有一个时候，并没有区别，当有多个元素的时候，我们看看效果：</p>
<pre><code><span class="id">#pers-red</span> <span class="class">.item</span><span class="rules">{
  <span class="rule"><span class="attribute">background</span>:<span class="value"> red</span></span>;
  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">perspective</span>( <span class="number">400px</span> ) <span class="function">rotateY</span>(<span class="number">45deg</span>)</span></span>;
<span class="rule">}</span></span>
</code></pre><div class="pers-con" id="pers-red"><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br></div>

<pre><code><span class="id">#pers-blue</span> <span class="rules">{
  <span class="rule"><span class="attribute">perspective</span>:<span class="value"> <span class="number">400px</span></span></span>;
<span class="rule">}</span></span>

<span class="id">#pers-blue</span> <span class="class">.item</span><span class="rules">{
  <span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;
  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">45deg</span> )</span></span>;
<span class="rule">}</span></span>
</code></pre><div class="pers-con" id="pers-blue"><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br><div class="item">&nbsp;</div><br></div>

<p>上面这两种写法，都触发了元素的3D行为，函数型的写法<code>transform:perspective(400px)</code>适用于单个元素，会对每一个元素做3D视图的变换，而<code>perspective:400px</code>的写法，需写在父元素上，然后以父元素的视角，对多个子元素进行3D变换，多个子元素共享同一个3D空间，可以自己打开console修改感受一下。</p>
<p><code>perspective</code>的参数值，决定了3D效果的强烈程度，可以想象为距离多远去观察元素。值越大，观察距离就越远，同样的旋转值，看起来效果就弱一些；值越小，距离越近，3D效果就更强烈。</p>
<h4 id="perspective-orgin">perspective-orgin</h4>
<p>通常，对一个元素进行3D变换的时候，变换点都是元素的中心点，如果你想以其他的位置为变换点，那就可以用这个属性来做调整：</p>
<pre><code><span class="attribute">perspective-orgin</span>: <span class="string">20% 70%;</span>
</code></pre><p>这个是默认值的<code>perspective-orign:50% 50%</code>：</p>
<div id="transform1"><br><div class="inner"><br><img src="http://lorempixel.com/150/150/city" alt="Nature"><br><img src="http://lorempixel.com/150/150/food" alt="Nature"><br><img src="http://lorempixel.com/150/150/people" alt="Nature"><br></div><br></div>

<p>这个是<code>perspective-orgin: 0% 50%;</code></p>
<div id="transform1" sytle="-webkit-perspective-origin:0% 50%;perspective-origin:0% 50%"><br><div class="inner"><br><img src="http://lorempixel.com/150/150/nature" alt="Nature"><br><img src="http://lorempixel.com/150/150/animals" alt="Nature"><br><img src="http://lorempixel.com/150/150/abstract" alt="Nature"><br></div><br></div>

<h4 id="transform-style">transform-style</h4>
<p>这个参数用来共享父元素的3D空间，这样说起来有些抽象，下面第一个翻卡片的例子中会讲到。</p>
<h4 id="backface-visibility">backface-visibility</h4>
<p>backface-visibility 属性可用于隐藏内容的背面。默认情况下，背面可见，这意味着即使在翻转后，变换的内容仍然可见。但当 backface-visibility 设置为 hidden 时，旋转后内容将隐藏，因为旋转后正面将不再可见。该功能可帮助你模拟多面的对象，例如下例中使用的卡片。通过将 backface-visibility 设置为 hidden，可以确保只有正面可见。</p>
<h2 id="CSS3_动画实例">CSS3 动画实例</h2>
<p>下面例子中的代码，为了方便查看都没有写浏览器前缀，也没有加入其他的修饰属性，所以实际应用时，不要忘记哦，当然也可以直接console查看。</p>
<h3 id="CSS3_翻纸牌">CSS3 翻纸牌</h3>
<p>做一个翻纸牌的效果，结构很简单：</p>
<pre><code>&lt;<span class="keyword">div</span> <span class="property">id</span>=<span class="string">"cardflip"</span>&gt;
  &lt;<span class="keyword">div</span> <span class="property">id</span>=<span class="string">"card1"</span>&gt;
    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"front"</span>&gt;<span class="number">1</span>&lt;/<span class="keyword">div</span>&gt;
    &lt;<span class="keyword">div</span> <span class="type">class</span>=<span class="string">"back"</span>&gt;<span class="number">2</span>&lt;/<span class="keyword">div</span>&gt;
  &lt;/<span class="keyword">div</span>&gt;
&lt;/<span class="keyword">div</span>&gt;
</code></pre><p><code>.cardflip</code>是整个3D效果的容器，<code>#card1</code>是翻转效果的元素，<code>.front</code>和<code>.back</code>是翻转的两面。添加样式：</p>
<pre><code><span class="id">#cardflip</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200px</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">260px</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;
    <span class="rule"><span class="attribute">perspective</span>:<span class="value"> <span class="number">800px</span></span></span>;
<span class="rule">}</span></span>

<span class="id">#card1</span> <span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>;
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">transform-style</span>:<span class="value"> preserve-<span class="number">3</span>d</span></span>;
    <span class="rule"><span class="attribute">transition</span>:<span class="value"> transform <span class="number">1s</span></span></span>;
<span class="rule">}</span></span>
</code></pre><p>首先给<code>#cardflip</code>添加<code>perspective</code>属性，这样才能触发3D变换，之后<code>#card1</code>就在父元素的3D空间中了，用了<code>absolute</code>来定位子元素，设置宽高都是<code>100%</code>，这样就可以让<code>transform-origin</code>在元素的中心点，这个后面再讨论。</p>
<p><code>transform-style</code>有两个值，一个是默认的<code>flat</code>一个是<code>preserve-3d</code>，由于<code>perspective</code>的3D空间，只能作用于直接的子元素，那么<code>.front</code>和<code>.back</code>也需要<code>#cardflip</code>的3D空间的话，就需要给<code>#card1</code>添加这个属性，</p>
<pre><code><span class="id">#card1</span> <span class="tag">div</span><span class="rules">{
    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100%</span></span></span>;
    <span class="rule"><span class="attribute">backface-visibility</span>:<span class="value"> hidden</span></span>;
<span class="rule">}</span></span>
</code></pre><p>只有<code>#card1 div</code>元素共享了外层元素的3D空间之后，3D变换的属性才能生效，这时候的<code>backface-visibility</code>才有效，设置为<code>hidden</code>。</p>
<pre><code><span class="id">#card1</span> <span class="class">.front</span> <span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> red</span></span>;
<span class="rule">}</span></span>

<span class="id">#card1</span> <span class="class">.back</span> <span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">180deg</span> )</span></span>;
<span class="rule">}</span></span>

<span class="id">#card1</span><span class="class">.flipped</span> <span class="rules">{
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">180deg</span> )</span></span>;
<span class="rule">}</span></span>
</code></pre><p>因为设置了<code>backface-visibility</code>，而<code>.back</code>默认就是以Y轴旋转了180度，空间想象一下，<code>.back</code>就转到背面去了，所以<code>hidden</code>属性生效，就看不到<code>.back</code>了。</p>
<p>当<code>#card1</code>添加了<code>.flipped</code>的样式，<code>#card1</code>以Y轴旋转了180度，这时候<code>.front</code>转到了背面，而<code>.back</code>从背面转到了前面，所以就完成了切换。这一段需要仔细的想一想。好了，看看下面的实例，点击即可翻转：</p>
<div id="cardflip"><br><div id="card1"><br><div class="front">1</div><br><div class="back">2</div><br></div><br></div>

<p>我们再给这个翻转加一些偏移的效果，看起来会不那么生硬。这就用到了<code>transform-origin</code>，这个参数：</p>
<pre><code><span class="id">#card1</span> <span class="rules">{ <span class="rule"><span class="attribute">transform-origin</span>:<span class="value"> left center</span></span>; <span class="rule">}</span></span>

<span class="id">#card1</span><span class="class">.flipped</span> <span class="rules">{
  <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>( <span class="number">100%</span> ) <span class="function">rotateY</span>( <span class="number">180deg</span> )</span></span>;
<span class="rule">}</span></span>
</code></pre><p>默认的<code>transform-origin</code>是<code>center center</code>，我们改成<code>left center</code>之后，就不再以元素的x方向的中心为轴旋转，而是以元素的左边为Y轴旋转，所以还需要给整个<code>#card1</code>加一个位移量<code>translate</code>，值是<code>100%</code>，就是元素本身的宽度。</p>
<p>可以在console里面去掉<code>#card1.flipped</code>的<code>translate</code>帮助理解。</p>
<div id="cardflip1"><br><div id="card2"><br><div class="front">1</div><br><div class="back">2</div><br></div><br></div>

<p>这里有一点需要注意，当元素在z轴上有了位移，或者朝向负角度旋转，会导致元素在页面上无法被鼠标点击到，想像一下3D空间，这个元素已经位于整个页面平面的<strong>里面</strong>，所以无法触及了。</p>
<h3 id="CSS3_立方体">CSS3 立方体</h3>
<p>做完了反转卡片的效果，肯定还想做更炫的，来试试做一个立方体吧：</p>
<pre><code><span class="tag">&lt;<span class="title">section</span> <span class="attribute">id</span>=<span class="value">"cube-con"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"cube"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span> <span class="attribute">class</span>=<span class="value">"front"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span> <span class="attribute">class</span>=<span class="value">"back"</span>&gt;</span>2<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span> <span class="attribute">class</span>=<span class="value">"right"</span>&gt;</span>3<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span> <span class="attribute">class</span>=<span class="value">"left"</span>&gt;</span>4<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span> <span class="attribute">class</span>=<span class="value">"top"</span>&gt;</span>5<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span> <span class="attribute">class</span>=<span class="value">"bottom"</span>&gt;</span>6<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">section</span>&gt;</span>

#cube-con {
    width: 200px;
    height: 200px;
    position: relative;
    perspective: 1000px;
}

#cube {
    width: 100%;
    height: 100%;
    position: absolute;
    transform-style: preserve-3d;
}

#cube figure {
    width: 196px;
    height: 196px;
    display: block;
    position: absolute;
    border: 2px solid black;
}
</code></pre><p>这一部分和上一个例子没有太大的差别，应该都能理解每一个属性的含义了。</p>
<pre><code><span class="id">#cube</span> <span class="class">.front</span>  <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(   <span class="number">0deg</span> ) <span class="function">translateZ</span>( <span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span> <span class="class">.back</span>   <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateX</span>( <span class="number">180deg</span> ) <span class="function">translateZ</span>( <span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span> <span class="class">.right</span>  <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(  <span class="number">90deg</span> ) <span class="function">translateZ</span>( <span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span> <span class="class">.left</span>   <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( -<span class="number">90deg</span> ) <span class="function">translateZ</span>( <span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span> <span class="class">.top</span>    <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateX</span>(  <span class="number">90deg</span> ) <span class="function">translateZ</span>( <span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span> <span class="class">.bottom</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateX</span>( -<span class="number">90deg</span> ) <span class="function">translateZ</span>( <span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
</code></pre><p>立方体的每一个面，经过<code>rotate</code>旋转之后，就放置在了他该被放置的地方，但是这时候会发现，这些层叠加在一起，还没有成为一个立方体，这时候需要给Z轴一个位移，想象一下我们的视角点在<code>#cube</code>正中间，拉伸z轴之后，<code>.right</code>、<code>left</code>等面就会有一定的角度，参考画画时候的透视，因为刚好在中心点，所以位移量就是宽度的一半。分步过程可以看<a href="http://desandro.github.io/3dtransforms/examples/cube-01-steps.html" target="_blank" rel="external">这里</a>。</p>
<p>因为z轴拉伸之后，原来的对象会被放大一些，这样就会模糊掉，为了去掉这个影响，我们需要把立方体再推回原来的视角平面，于是：</p>
<pre><code><span class="id">#cube</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> )</span></span>; <span class="rule">}</span></span>
</code></pre><p>完成了立方体，想让某个面旋转到前方，只需转动整个立方体，不用去调整每个面：</p>
<pre><code><span class="id">#cube</span><span class="class">.show-front</span>  <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> ) <span class="function">rotateY</span>(    <span class="number">0deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span><span class="class">.show-back</span>   <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> ) <span class="function">rotateX</span>( -<span class="number">180deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span><span class="class">.show-right</span>  <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> ) <span class="function">rotateY</span>(  -<span class="number">90deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span><span class="class">.show-left</span>   <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> ) <span class="function">rotateY</span>(   <span class="number">90deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span><span class="class">.show-top</span>    <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> ) <span class="function">rotateX</span>(  -<span class="number">90deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#cube</span><span class="class">.show-bottom</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">100px</span> ) <span class="function">rotateX</span>(   <span class="number">90deg</span> )</span></span>; <span class="rule">}</span></span>

<span class="comment">/**还有过渡效果**/</span>
<span class="id">#cube</span> <span class="rules">{ <span class="rule"><span class="attribute">transition</span>:<span class="value"> transform <span class="number">1s</span></span></span>; <span class="rule">}</span></span>
</code></pre><section id="cube-con"><br><div id="cube"><br><figure class="front">1</figure><br><figure class="back">2</figure><br><figure class="right">3</figure><br><figure class="left">4</figure><br><figure class="top">5</figure><br><figure class="bottom">6</figure><br></div><br></section>

<div id="cube-btn"><br><button data-class="show-front">Show Front</button><br><button data-class="show-back">Show Back</button><br><button data-class="show-right">Show Right</button><br><button data-class="show-left">Show Left</button><br><button data-class="show-top">Show Top</button><br><button data-class="show-bottom">Show Bottom</button><br></div>


<h3 id="3D_旋转跑马灯">3D 旋转跑马灯</h3>
<p>做幻灯片展示的方法有很多，我们用CSS3的3D技术来试试看：</p>
<pre><code><span class="tag">&lt;<span class="title">section</span> <span class="attribute">class</span>=<span class="value">"container"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"carousel"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>1<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>2<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>3<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>4<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>5<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>6<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>7<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>8<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
    <span class="tag">&lt;<span class="title">figure</span>&gt;</span>9<span class="tag">&lt;/<span class="title">figure</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">section</span>&gt;</span>

.container {
  width: 210px;
  height: 140px;
  position: relative;
  perspective: 1000px;
}

#carousel {
  width: 100%;
  height: 100%;
  position: absolute;
  transform-style: preserve-3d;
}

#carousel figure {
  display: block;
  position: absolute;
  width: 186px;
  height: 116px;
  left: 10px;
  top: 10px;
  border: 2px solid black;
}
</code></pre><p>上面这一段，没什么特别要说明的，基本的结构样式，以及之前重点说明过的<code>perspective</code>和<code>preserve-3d</code>。现在有9个卡片，要环绕成一圈，那么每个的角度就是<code>40deg</code> （360/90）。</p>
<pre><code><span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(1)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(   <span class="number">0deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(2)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(  <span class="number">40deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(3)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(  <span class="number">80deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(4)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">120deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(5)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">160deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(6)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">200deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(7)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">240deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(8)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">280deg</span> )</span></span>; <span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(9)</span> <span class="rules">{ <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>( <span class="number">320deg</span> )</span></span>; <span class="rule">}</span></span>
</code></pre><p>好了，和立方体的例子到同样的步骤了，现在所有的卡片做了Y轴旋转，但因为观察的视角点没有变，所以看起来还是平面，如下这样：</p>
<p><img src="http://ww3.sinaimg.cn/large/8b8af2c8jw1e84s4cel0uj208e05raa0.jpg" alt="caro"></p>
<p>立方体的位移很好计算，只要是宽度、高度、或者深度的一半就可以了，这个旋转的跑马灯应该怎么计算呢？</p>
<p><img src="http://ww1.sinaimg.cn/large/8b8af2c8jw1e84s5efyxej20f00b6aaj.jpg" alt="caro-cmpu"></p>
<p>从旋转跑马灯的上方观察，每个卡片的宽度是<code>210px</code>，角度是<code>40deg</code>，要计算到中心点的距离，根据旁边的三角形可得：</p>
<pre><code><span class="attribute">r </span>=<span class="string"> 105 / tan(20deg) = 288px</span>
</code></pre><p>所以：</p>
<pre><code><span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(1)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(  <span class="number">0deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(2)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>( <span class="number">40deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(3)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>( <span class="number">80deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(4)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(<span class="number">120deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(5)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(<span class="number">160deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(6)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(<span class="number">200deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(7)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(<span class="number">240deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(8)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(<span class="number">280deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
<span class="id">#carousel</span> <span class="tag">figure</span><span class="pseudo">:nth-child(9)</span> <span class="rules">{<span class="rule"><span class="attribute">transform</span>:<span class="value"><span class="function">rotateY</span>(<span class="number">320deg</span>) <span class="function">translateZ</span>(<span class="number">288px</span>)</span></span>;<span class="rule">}</span></span>
</code></pre><p>知道了计算方法，如果要改变卡片的个数，或者宽度，只要按照那个公式再计算就好：</p>
<pre><code><span class="keyword">var</span> tz = <span class="built_in">Math</span>.round( ( panelSize / <span class="number">2</span> ) / 
  <span class="built_in">Math</span>.tan( ( ( <span class="built_in">Math</span>.PI * <span class="number">2</span> ) / numberOfPanels ) / <span class="number">2</span> ) );
<span class="comment">// or simplified to</span>
<span class="keyword">var</span> tz = <span class="built_in">Math</span>.round( ( panelSize / <span class="number">2</span> ) / 
  <span class="built_in">Math</span>.tan( <span class="built_in">Math</span>.PI / numberOfPanels ) );
</code></pre><p>计算好卡片的位置之后，然后旋转<code>#carousel</code>就可以了，当然这个要用js来控制了：</p>
<pre><code><span class="id">#carousel</span><span class="rules">{
    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateZ</span>( -<span class="number">288px</span> ) <span class="function">rotateY</span>( -<span class="number">160deg</span> )</span></span>;
<span class="rule">}</span></span>
</code></pre><p>js代码如下：</p>
<pre><code>$(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{
    $(<span class="string">'#car-pre'</span>).click(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{
        <span class="keyword">var</span> deg = $(<span class="string">'#carousel'</span>).attr(<span class="string">'data-deg'</span>) || <span class="number">0</span>;
        deg = <span class="built_in">parseInt</span>(deg)+<span class="number">40</span>;

        <span class="keyword">var</span> value = <span class="string">'translateZ(-288px) rotateY('</span>+deg+<span class="string">'deg)'</span>;

        $(<span class="string">'#carousel'</span>)
            .attr(<span class="string">'data-deg'</span>,deg)
            .css({
                <span class="string">'-webkit-transform'</span>:value
                ,<span class="string">'-moz-transform'</span>:value
                ,<span class="string">'-o-transform'</span>:value
                ,<span class="string">'transform'</span>:value
            });
    });
    $(<span class="string">'#car-next'</span>).click(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>{
        <span class="keyword">var</span> deg = $(<span class="string">'#carousel'</span>).attr(<span class="string">'data-deg'</span>) || <span class="number">0</span>;
        deg = <span class="built_in">parseInt</span>(deg)-<span class="number">40</span>;

        <span class="keyword">var</span> value = <span class="string">'translateZ(-288px) rotateY('</span>+deg+<span class="string">'deg)'</span>;

        $(<span class="string">'#carousel'</span>)
            .attr(<span class="string">'data-deg'</span>,deg)
            .css({
                <span class="string">'-webkit-transform'</span>:value
                ,<span class="string">'-moz-transform'</span>:value
                ,<span class="string">'-o-transform'</span>:value
                ,<span class="string">'transform'</span>:value
            });
    });
</code></pre><p><section id="caro-con"><div id="carousel"><figure>1</figure><figure>2</figure><figure>3</figure><figure>4</figure><figure>5</figure><figure>6</figure><figure>7</figure><figure>8</figure><figure>9</figure></div></section></p>
<div id="car-btn"><br><button id="car-pre">&lt; Prev</button><br><button id="car-next">Next &gt;</button><br></div>

<h2 id="结语">结语</h2>
<p>终于完成了这篇，梳理的过程对我自己很有提高，希望对你也能有些帮助，有兴趣可以关注我，期待下以后的博客~</p>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>mabao</h4>
    <p>A designer, developer and entrepreneur. Spends his time travelling the world with a bag of kites. Likes journalism and publishing platforms.</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://yoursite.com/2014/10/27/2013-09-27-moretwo blogtest/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2014/10/27/2013-09-27-moretwo blogtest/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://yoursite.com/2014/10/27/2013-09-27-moretwo blogtest/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2014/10/27/BetterTouchTool Mac 强化快捷手势呕血推荐体验/">
        ← CSS3动画详解sssssss
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2014/10/27/BetterTouchTool-Mac-强化快捷手势呕血推荐/">
        BetterTouchTool   Mac 强化快捷手势呕血推荐 →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
</div>
</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">Moretwo</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>
<script type="text/javascript" src="/js/menu.js"></script>




  </div>
</div>

<nav  class="outer-nav top horizontal">


          <a class="icon-home"  href="/home">Home</a>

          <a class="icon-news"  href="/news">News</a>

          <a class="icon-image"  href="/Images">Images</a>

          <a class="icon-upload"  href="/Uploads">Uploads</a>

          <a class="icon-star"  href="/Favorites">Favorites</a>

          <a class="icon-mail"  href="/Messages">Messages</a>

          <a class="icon-lock"  href="/Security">Security</a>


</nav>

</div>
</body>
</html>
